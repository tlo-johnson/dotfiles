{
  "profiles": [
    {
      "name": "Default profile",
      "selected": true,
      "virtual_hid_keyboard": { "country_code": 0, "keyboard_type_v2": "ansi" },
      "devices": [
        {
          "disable_built_in_keyboard_if_exists": true,
          "identifiers": { "is_keyboard": true, "product_id": 50894, "vendor_id": 12951 }
        }
      ],
      "complex_modifications": {
        "rules": [
          {
            "description": "Caps = Hyper Layer (variable) / Esc if alone",
            "manipulators": [
              {
                "type": "basic",
                "from": { "key_code": "caps_lock", "modifiers": { "optional": ["any"] } },
                "to": [ { "set_variable": { "name": "hyper_mode", "value": 1 } } ],
                "to_after_key_up": [ { "set_variable": { "name": "hyper_mode", "value": 0 } } ],
                "to_if_alone": [ { "key_code": "escape" } ]
              }
            ]
          },

          {
            "description": "Hyper-layer: Brackets & symbols",
            "manipulators": [
              {
                "type":"basic",
                "from": { "key_code":"u", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"9", "modifiers":["left_shift","any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"p", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"0", "modifiers":["left_shift","any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"m", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"hyphen", "modifiers":["any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"slash", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"equal_sign", "modifiers":["any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"h", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"hyphen", "modifiers":["left_shift","any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"quote", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"equal_sign", "modifiers":["left_shift","any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              }
            ]
          },

          {
            "description": "Hyper-layer: Enter",
            "manipulators": [
              {
                "type": "basic",
                "from": { "key_code": "return_or_enter", "modifiers": { "optional": ["any"] } },
                "to": [ { "key_code": "vk_none" } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"f", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"return_or_enter", "modifiers":["any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              }
            ]
          },

          {
            "description": "Hyper-layer: Backspace",
            "manipulators": [
              {
                "type": "basic",
                "from": { "key_code": "delete_or_backspace", "modifiers": { "optional": ["any"] } },
                "to": [ { "key_code": "vk_none" } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"v", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"delete_or_backspace", "modifiers":["any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"c", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"delete_or_backspace", "modifiers":["left_option"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              }
            ]
          },

          {
            "description": "Hyper-layer: Arrow Keys",
            "manipulators": [
              {
                "type":"basic",
                "from": { "key_code":"l", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"up_arrow", "modifiers":["any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"j", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"left_arrow", "modifiers":["any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"k", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"down_arrow", "modifiers":["any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"semicolon", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"right_arrow", "modifiers":["any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              }
            ]
          },

          {
            "description": "Hyper-layer: Home/End",
            "manipulators": [
              {
                "type":"basic",
                "from": { "key_code":"a", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"home", "modifiers":["any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"f", "modifiers": { "optional":["any"] } },
                "to": [ { "key_code":"end", "modifiers":["any"] } ],
                "conditions": [ { "type":"variable_if","name":"hyper_mode","value":1 } ]
              }
            ]
          },

          {
            "description": "Toggle CAPS_LOCK with LEFT_SHIFT + RIGHT_SHIFT",
            "manipulators": [
              {
                "type":"basic",
                "from": { "key_code":"left_shift", "modifiers": { "mandatory":["right_shift"], "optional":["caps_lock"] } },
                "to": [ { "key_code":"caps_lock" } ],
                "to_if_alone": [ { "key_code":"left_shift" } ]
              },
              {
                "type":"basic",
                "from": { "key_code":"right_shift", "modifiers": { "mandatory":["left_shift"], "optional":["caps_lock"] } },
                "to": [ { "key_code":"caps_lock" } ],
                "to_if_alone": [ { "key_code":"right_shift" } ]
              }
            ]
          }
        ]
      }
    }
  ]
}
